function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4zk1":function(e,t,n){"use strict";n.r(t),n.d(t,"PhotosModule",(function(){return $}));var c=n("ofXK");function r(e,t,n,c){return new(n||(n=Promise))((function(r,o){function s(e){try{a(c.next(e))}catch(t){o(t)}}function i(e){try{a(c.throw(e))}catch(t){o(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((c=c.apply(e,t||[])).next())}))}var o,s,i=n("fXoL"),a=n("AytR"),l=n("tk/3"),u=((s=function(){function e(t){_classCallCheck(this,e),this.http=t,this.BASE_URL=a.a.server+"/users"}return _createClass(e,[{key:"getUsers",value:function(){return r(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.get(this.BASE_URL).toPromise());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getAlbumsByUser",value:function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("".concat(this.BASE_URL,"/").concat(e,"/albums")).toPromise());case 1:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||s)(i.Xb(l.a))},s.\u0275prov=i.Jb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),f=((o=function(){function e(t){_classCallCheck(this,e),this.http=t,this.BASE_URL=a.a.server+"/albums"}return _createClass(e,[{key:"getPhotosByAlbum",value:function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("".concat(this.BASE_URL,"/").concat(e,"/photos")).toPromise());case 1:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||o)(i.Xb(l.a))},o.\u0275prov=i.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=n("NFeN"),h=n("+0xr");function b(e,t){1&e&&(i.Tb(0,"th",8),i.tc(1," Users "),i.Sb())}function d(e,t){if(1&e&&(i.Tb(0,"td",9),i.tc(1),i.Sb()),2&e){var n=t.$implicit;i.Cb(1),i.vc(" ",n.name," ")}}function p(e,t){1&e&&i.Ob(0,"tr",10)}var g=function(e){return{selected:e}};function v(e,t){if(1&e){var n=i.Ub();i.Tb(0,"tr",11),i.bc("click",(function(){i.mc(n);var e=t.$implicit;return i.fc(2).selectRow(e)})),i.Sb()}if(2&e){var c=t.$implicit,r=i.fc(2);i.ic("ngClass",i.jc(1,g,c.id===(null==r.selectedUser?null:r.selectedUser.id)))}}function C(e,t){if(1&e&&(i.Tb(0,"table",2),i.Rb(1,3),i.sc(2,b,2,0,"th",4),i.sc(3,d,2,1,"td",5),i.Qb(),i.sc(4,p,1,0,"tr",6),i.sc(5,v,1,3,"tr",7),i.Sb()),2&e){var n=i.fc();i.ic("dataSource",n.users),i.Cb(4),i.ic("matHeaderRowDef",n.displayedColumns),i.Cb(1),i.ic("matRowDefColumns",n.displayedColumns)}}var w,y=((w=function(){function e(){_classCallCheck(this,e),this.selectUser=new i.o,this.displayedColumns=["name"]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"selectRow",value:function(e){this.selectUser.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275cmp=i.Hb({type:w,selectors:[["cor-user-list"]],inputs:{users:"users",selectedUser:"selectedUser"},outputs:{selectUser:"selectUser"},decls:2,vars:1,consts:[[1,"component-container"],["mat-table","","class","",3,"dataSource",4,"ngIf"],["mat-table","",1,"",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.sc(1,C,6,3,"table",1),i.Sb()),2&e&&(i.Cb(1),i.ic("ngIf",t.users))},directives:[c.j,h.j,h.c,h.e,h.b,h.g,h.i,h.d,h.a,h.f,h.h,c.h],styles:[".component-container[_ngcontent-%COMP%]{display:flex;justify-content:center}table[_ngcontent-%COMP%]{border:1px solid #ddd;width:100%}.selected[_ngcontent-%COMP%]{background-color:#3f51b5}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width:580px){table[_ngcontent-%COMP%]{width:90%}}"],changeDetection:0}),w),k=n("Xa2L"),_=n("3Pt+"),P=n("kmnG"),O=n("d3UM"),x=n("FKr1");function M(e,t){if(1&e&&(i.Tb(0,"mat-option",6),i.tc(1),i.Sb()),2&e){var n=t.$implicit;i.ic("value",n.id),i.Cb(1),i.vc(" ",n.title," ")}}var U,S=((U=function(){function e(){_classCallCheck(this,e),this.selectAlbum=new i.o,this.albumIdCtrl=new _.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.listenToChanges()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"listenToChanges",value:function(){var e=this;this.subscription=this.albumIdCtrl.valueChanges.subscribe((function(t){e.selectAlbum.emit(t)}))}},{key:"resetControl",value:function(){this.albumIdCtrl.reset(null,{emitEvent:!1})}}]),e}()).\u0275fac=function(e){return new(e||U)},U.\u0275cmp=i.Hb({type:U,selectors:[["cor-album-picker"]],inputs:{user:"user",albums:"albums"},outputs:{selectAlbum:"selectAlbum"},decls:9,vars:3,consts:[[1,"component-container"],[1,"user-name"],["appearance","outline","color","primary"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"spacer"],[3,"value"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"p",1),i.tc(2),i.Sb(),i.Tb(3,"mat-form-field",2),i.Tb(4,"mat-label"),i.tc(5,"Choose an Album"),i.Sb(),i.Tb(6,"mat-select",3),i.sc(7,M,2,2,"mat-option",4),i.Sb(),i.Sb(),i.Ob(8,"div",5),i.Sb()),2&e&&(i.Cb(2),i.uc(t.user.name),i.Cb(4),i.ic("formControl",t.albumIdCtrl),i.Cb(1),i.ic("ngForOf",t.albums))},directives:[P.b,P.e,O.a,_.e,_.b,c.i,x.f],styles:[".user-name[_ngcontent-%COMP%]{color:#3f51b5;font-weight:500;margin-right:8px 3px}mat-form-field[_ngcontent-%COMP%]{width:100%;max-width:400px}spacer[_ngcontent-%COMP%]{flex:1 1 auto}@media screen and (max-width:580px){.component-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}mat-form-field[_ngcontent-%COMP%]{max-width:90%}}"],changeDetection:0}),U);function A(e,t){if(1&e&&(i.Tb(0,"div",3),i.Ob(1,"img",4),i.Sb()),2&e){var n=t.$implicit;i.Cb(1),i.ic("src",n.thumbnailUrl,i.nc)}}var R,T=((R=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||R)},R.\u0275cmp=i.Hb({type:R,selectors:[["cor-photo-gallery"]],inputs:{photos:"photos"},decls:3,vars:1,consts:[[1,"component-container"],[1,"album-container"],["class","photo-container",4,"ngFor","ngForOf"],[1,"photo-container"],[3,"src"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"div",1),i.sc(2,A,2,1,"div",2),i.Sb(),i.Sb()),2&e&&(i.Cb(2),i.ic("ngForOf",t.photos))},directives:[c.i],styles:[".photo-container[_ngcontent-%COMP%]{display:inline-flex;margin:5px}@media screen and (max-width:580px){.component-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.album-container[_ngcontent-%COMP%]{max-width:90%}}"],changeDetection:0}),R),I=["picker"];function D(e,t){1&e&&(i.Tb(0,"div",9),i.Ob(1,"mat-spinner"),i.Sb())}function B(e,t){if(1&e){var n=i.Ub();i.Tb(0,"cor-album-picker",10,11),i.bc("selectAlbum",(function(e){return i.mc(n),i.fc().selectAlbum(e)})),i.Sb()}if(2&e){var c=i.fc();i.ic("user",c.selectedUser)("albums",c.albums)}}function L(e,t){if(1&e&&i.Ob(0,"cor-photo-gallery",12),2&e){var n=i.fc();i.ic("photos",n.photos)}}var j,F,E=((j=function(){function e(t,n){_classCallCheck(this,e),this.userData=t,this.albumData=n,this.loading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadUsers()}},{key:"selectUser",value:function(e){e&&(this.photos&&this.resetPhotos(),this.selectedUser=e,this.loadUserAlbums(e.id))}},{key:"selectAlbum",value:function(e){e&&(this.selectedAlbum=this.albums.find((function(t){return t.id===e})),this.loadPhotos(e))}},{key:"back",value:function(){this.photos?this.resetPhotos():this.selectedUser&&this.resetAlbums()}},{key:"resetPhotos",value:function(){this.photos=null,this.selectedAlbum=null,this.albumPickerComponent.resetControl()}},{key:"resetAlbums",value:function(){this.albums=null,this.selectedUser=null}},{key:"loadUsers",value:function(){return r(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userData.getUsers();case 3:this.users=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[0,6,9,12]])})))}},{key:"loadPhotos",value:function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.albumData.getPhotosByAlbum(e);case 4:this.photos=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,7,10,13]])})))}},{key:"loadUserAlbums",value:function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.userData.getAlbumsByUser(e);case 4:this.albums=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,7,10,13]])})))}}]),e}()).\u0275fac=function(e){return new(e||j)(i.Nb(u),i.Nb(f))},j.\u0275cmp=i.Hb({type:j,selectors:[["app-photos"]],viewQuery:function(e,t){var n;1&e&&i.wc(I,!0),2&e&&i.kc(n=i.cc())&&(t.albumPickerComponent=n.first)},decls:10,vars:5,consts:[["class","spinner-container",4,"ngIf"],[1,"actions"],[3,"click"],[1,"column-container"],[1,"left"],[3,"users","selectedUser","selectUser"],[1,"right"],[3,"user","albums","selectAlbum",4,"ngIf"],[3,"photos",4,"ngIf"],[1,"spinner-container"],[3,"user","albums","selectAlbum"],["picker",""],[3,"photos"]],template:function(e,t){1&e&&(i.sc(0,D,2,0,"div",0),i.Tb(1,"section",1),i.Tb(2,"mat-icon",2),i.bc("click",(function(){return t.back()})),i.tc(3,"arrow_back"),i.Sb(),i.Sb(),i.Tb(4,"div",3),i.Tb(5,"section",4),i.Tb(6,"cor-user-list",5),i.bc("selectUser",(function(e){return t.selectUser(e)})),i.Sb(),i.Sb(),i.Tb(7,"section",6),i.sc(8,B,2,2,"cor-album-picker",7),i.sc(9,L,1,1,"cor-photo-gallery",8),i.Sb(),i.Sb()),2&e&&(i.ic("ngIf",t.loading),i.Cb(6),i.ic("users",t.users)("selectedUser",t.selectedUser),i.Cb(2),i.ic("ngIf",t.albums),i.Cb(1),i.ic("ngIf",t.photos))},directives:[c.j,m.a,y,k.b,S,T],styles:[".actions[_ngcontent-%COMP%]{padding:20px;background-color:#f8f8f8;display:flex;align-items:center}.actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.column-container[_ngcontent-%COMP%]{display:flex}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding:10px}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:20%;min-width:300px}.column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:80%}.spinner-container[_ngcontent-%COMP%]{height:calc(100vh - 60px);width:100%;position:absolute;display:flex;justify-content:center;align-items:center}mat-spinner[_ngcontent-%COMP%]{height:100%;display:absolute}@media screen and (max-width:1000px){.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{min-width:200px}}@media screen and (max-width:580px){.column-container[_ngcontent-%COMP%]{flex-direction:column}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}"]}),j),H=n("tyNb"),N=n("i2L+"),X=[{path:"",component:E}],$=((F=function e(){_classCallCheck(this,e)}).\u0275mod=i.Lb({type:F}),F.\u0275inj=i.Kb({factory:function(e){return new(e||F)},imports:[[c.b,N.a,H.b.forChild(X)]]}),F)}}]);