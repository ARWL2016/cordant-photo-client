function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4zk1":function(e,t,n){"use strict";n.r(t),n.d(t,"PhotosModule",(function(){return z}));var c=n("ofXK");function o(e,t,n,c){return new(n||(n=Promise))((function(o,r){function s(e){try{a(c.next(e))}catch(t){r(t)}}function i(e){try{a(c.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((c=c.apply(e,t||[])).next())}))}var r,s,i,a=n("fXoL"),l=n("AytR"),u=n("tk/3"),f=((s=function(){function e(t){_classCallCheck(this,e),this.http=t,this.BASE_URL=l.a.server+"/users"}return _createClass(e,[{key:"getUsers",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.get(this.BASE_URL).toPromise());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getAlbumsByUser",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("".concat(this.BASE_URL,"/").concat(e,"/albums")).toPromise());case 1:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||s)(a.Yb(u.a))},s.\u0275prov=a.Kb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),h=((r=function(){function e(t){_classCallCheck(this,e),this.http=t,this.BASE_URL=l.a.server+"/albums"}return _createClass(e,[{key:"getPhotosByAlbum",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("".concat(this.BASE_URL,"/").concat(e,"/photos")).toPromise());case 1:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||r)(a.Yb(u.a))},r.\u0275prov=a.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),m=n("dNgK"),b=((i=function(){function e(t){_classCallCheck(this,e),this.snackbar=t}return _createClass(e,[{key:"default",value:function(e){this.snackbar.open(e,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}}]),e}()).\u0275fac=function(e){return new(e||i)(a.Yb(m.a))},i.\u0275prov=a.Kb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),d=n("NFeN"),p=n("+0xr");function g(e,t){1&e&&(a.Ub(0,"th",8),a.uc(1," Users "),a.Tb())}function v(e,t){if(1&e&&(a.Ub(0,"td",9),a.uc(1),a.Tb()),2&e){var n=t.$implicit;a.Cb(1),a.wc(" ",n.name," ")}}function C(e,t){1&e&&a.Pb(0,"tr",10)}var w=function(e){return{selected:e}};function k(e,t){if(1&e){var n=a.Vb();a.Ub(0,"tr",11),a.cc("click",(function(){a.nc(n);var e=t.$implicit;return a.gc(2).selectRow(e)})),a.Tb()}if(2&e){var c=t.$implicit,o=a.gc(2);a.jc("ngClass",a.kc(1,w,c.id===(null==o.selectedUser?null:o.selectedUser.id)))}}function y(e,t){if(1&e&&(a.Ub(0,"table",2),a.Sb(1,3),a.tc(2,g,2,0,"th",4),a.tc(3,v,2,1,"td",5),a.Rb(),a.tc(4,C,1,0,"tr",6),a.tc(5,k,1,3,"tr",7),a.Tb()),2&e){var n=a.gc();a.jc("dataSource",n.users),a.Cb(4),a.jc("matHeaderRowDef",n.displayedColumns),a.Cb(1),a.jc("matRowDefColumns",n.displayedColumns)}}var P,_=((P=function(){function e(){_classCallCheck(this,e),this.selectUser=new a.o,this.displayedColumns=["name"]}return _createClass(e,[{key:"selectRow",value:function(e){this.selectUser.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||P)},P.\u0275cmp=a.Ib({type:P,selectors:[["cor-user-list"]],inputs:{users:"users",selectedUser:"selectedUser"},outputs:{selectUser:"selectUser"},decls:2,vars:1,consts:[[1,"component-container"],["mat-table","","class","",3,"dataSource",4,"ngIf"],["mat-table","",1,"",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.tc(1,y,6,3,"table",1),a.Tb()),2&e&&(a.Cb(1),a.jc("ngIf",t.users))},directives:[c.j,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h,c.h],styles:[".component-container[_ngcontent-%COMP%]{display:flex;justify-content:center}table[_ngcontent-%COMP%]{border:1px solid #ddd;width:100%}.selected[_ngcontent-%COMP%]{background-color:#3f51b5}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width:580px){table[_ngcontent-%COMP%]{width:90%}}"],changeDetection:0}),P),U=n("Xa2L"),x=n("3Pt+"),O=n("kmnG"),M=n("d3UM"),A=n("FKr1");function R(e,t){if(1&e&&(a.Ub(0,"mat-option",6),a.uc(1),a.Tb()),2&e){var n=t.$implicit;a.jc("value",n.id),a.Cb(1),a.wc(" ",n.title," ")}}var T,j=((T=function(){function e(){_classCallCheck(this,e),this.selectAlbum=new a.o,this.albumIdCtrl=new x.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.listenToChanges()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"resetControl",value:function(){this.albumIdCtrl.reset(null,{emitEvent:!1})}},{key:"listenToChanges",value:function(){var e=this;this.subscription=this.albumIdCtrl.valueChanges.subscribe((function(t){e.selectAlbum.emit(t)}))}}]),e}()).\u0275fac=function(e){return new(e||T)},T.\u0275cmp=a.Ib({type:T,selectors:[["cor-album-picker"]],inputs:{user:"user",albums:"albums"},outputs:{selectAlbum:"selectAlbum"},decls:9,vars:3,consts:[[1,"component-container"],[1,"user-name"],["appearance","outline","color","primary"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"spacer"],[3,"value"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"p",1),a.uc(2),a.Tb(),a.Ub(3,"mat-form-field",2),a.Ub(4,"mat-label"),a.uc(5,"Choose an Album"),a.Tb(),a.Ub(6,"mat-select",3),a.tc(7,R,2,2,"mat-option",4),a.Tb(),a.Tb(),a.Pb(8,"div",5),a.Tb()),2&e&&(a.Cb(2),a.vc(t.user.name),a.Cb(4),a.jc("formControl",t.albumIdCtrl),a.Cb(1),a.jc("ngForOf",t.albums))},directives:[O.b,O.e,M.a,x.e,x.b,c.i,A.f],styles:[".user-name[_ngcontent-%COMP%]{color:#3f51b5;font-weight:500;margin-right:8px 3px}mat-form-field[_ngcontent-%COMP%]{width:100%;max-width:400px}spacer[_ngcontent-%COMP%]{flex:1 1 auto}@media screen and (max-width:580px){.component-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}mat-form-field[_ngcontent-%COMP%]{max-width:90%}}"],changeDetection:0}),T);function I(e,t){if(1&e&&(a.Ub(0,"div",3),a.Pb(1,"img",4),a.Tb()),2&e){var n=t.$implicit;a.Cb(1),a.jc("src",n.thumbnailUrl,a.oc)}}var D,B=((D=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||D)},D.\u0275cmp=a.Ib({type:D,selectors:[["cor-photo-gallery"]],inputs:{photos:"photos"},decls:3,vars:1,consts:[[1,"component-container"],[1,"album-container"],["class","photo-container",4,"ngFor","ngForOf"],[1,"photo-container"],[3,"src"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.tc(2,I,2,1,"div",2),a.Tb(),a.Tb()),2&e&&(a.Cb(2),a.jc("ngForOf",t.photos))},directives:[c.i],styles:[".photo-container[_ngcontent-%COMP%]{display:inline-flex;margin:5px}@media screen and (max-width:580px){.component-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.album-container[_ngcontent-%COMP%]{max-width:90%}}"],changeDetection:0}),D),L=["picker"];function S(e,t){1&e&&(a.Ub(0,"div",9),a.Pb(1,"mat-spinner",10),a.Tb())}function F(e,t){if(1&e){var n=a.Vb();a.Ub(0,"cor-album-picker",11,12),a.cc("selectAlbum",(function(e){return a.nc(n),a.gc().selectAlbum(e)})),a.Tb()}if(2&e){var c=a.gc();a.jc("user",c.selectedUser)("albums",c.albums)}}function E(e,t){if(1&e&&a.Pb(0,"cor-photo-gallery",13),2&e){var n=a.gc();a.jc("photos",n.photos)}}var K,$,N=((K=function(){function e(t,n,c){_classCallCheck(this,e),this.userData=t,this.albumData=n,this.snack=c,this.loading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadUsers()}},{key:"selectUser",value:function(e){e&&(this.photos&&this.resetPhotos(),this.selectedUser=e,this.loadUserAlbums(e.id))}},{key:"selectAlbum",value:function(e){e&&(this.selectedAlbum=this.albums.find((function(t){return t.id===e})),this.loadPhotos(e))}},{key:"back",value:function(){this.photos?this.resetPhotos():this.selectedUser&&this.resetAlbums()}},{key:"resetPhotos",value:function(){this.photos=null,this.selectedAlbum=null,this.albumPickerComponent.resetControl()}},{key:"resetAlbums",value:function(){this.albums=null,this.selectedUser=null}},{key:"loadUsers",value:function(){return o(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userData.getUsers();case 3:this.users=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),this.snack.default("Unable to show users");case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[0,6,9,12]])})))}},{key:"loadPhotos",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.albumData.getPhotosByAlbum(e);case 4:this.photos=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),this.snack.default("Unable to show photos");case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,7,10,13]])})))}},{key:"loadUserAlbums",value:function(e){return o(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.userData.getAlbumsByUser(e);case 4:this.albums=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),this.snack.default("Unable to show albums");case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,7,10,13]])})))}}]),e}()).\u0275fac=function(e){return new(e||K)(a.Ob(f),a.Ob(h),a.Ob(b))},K.\u0275cmp=a.Ib({type:K,selectors:[["cor-photos"]],viewQuery:function(e,t){var n;1&e&&a.yc(L,!0),2&e&&a.lc(n=a.dc())&&(t.albumPickerComponent=n.first)},decls:10,vars:5,consts:[["class","spinner-container",4,"ngIf"],[1,"actions"],[3,"click"],[1,"column-container"],[1,"left"],[3,"users","selectedUser","selectUser"],[1,"right"],[3,"user","albums","selectAlbum",4,"ngIf"],[3,"photos",4,"ngIf"],[1,"spinner-container"],["diameter","60"],[3,"user","albums","selectAlbum"],["picker",""],[3,"photos"]],template:function(e,t){1&e&&(a.tc(0,S,2,0,"div",0),a.Ub(1,"section",1),a.Ub(2,"mat-icon",2),a.cc("click",(function(){return t.back()})),a.uc(3,"arrow_back"),a.Tb(),a.Tb(),a.Ub(4,"div",3),a.Ub(5,"section",4),a.Ub(6,"cor-user-list",5),a.cc("selectUser",(function(e){return t.selectUser(e)})),a.Tb(),a.Tb(),a.Ub(7,"section",6),a.tc(8,F,2,2,"cor-album-picker",7),a.tc(9,E,1,1,"cor-photo-gallery",8),a.Tb(),a.Tb()),2&e&&(a.jc("ngIf",t.loading),a.Cb(6),a.jc("users",t.users)("selectedUser",t.selectedUser),a.Cb(2),a.jc("ngIf",t.albums),a.Cb(1),a.jc("ngIf",t.photos))},directives:[c.j,d.a,_,U.b,j,B],styles:[".actions[_ngcontent-%COMP%]{padding:20px;background-color:#f8f8f8;display:flex;align-items:center}.actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.column-container[_ngcontent-%COMP%]{display:flex}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding:10px}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:20%;min-width:300px}.column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:80%}.spinner-container[_ngcontent-%COMP%]{height:calc(100vh - 64px);width:100%;position:absolute;display:flex;justify-content:center;align-items:center}mat-spinner[_ngcontent-%COMP%]{height:100%;display:absolute}@media screen and (max-width:1000px){.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{min-width:200px}}@media screen and (max-width:580px){.column-container[_ngcontent-%COMP%]{flex-direction:column}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}"]}),K),H=n("tyNb"),X=n("i2L+"),Y=[{path:"",component:N}],z=(($=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:$}),$.\u0275inj=a.Lb({factory:function(e){return new(e||$)},imports:[[c.b,X.a,H.b.forChild(Y)]]}),$)}}]);