(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4zk1":function(t,e,n){"use strict";n.r(e),n.d(e,"PhotosModule",(function(){return L}));var o=n("ofXK");function s(t,e,n,o){return new(n||(n=Promise))((function(s,c){function i(t){try{l(o.next(t))}catch(e){c(e)}}function r(t){try{l(o.throw(t))}catch(e){c(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,r)}l((o=o.apply(t,e||[])).next())}))}var c=n("fXoL"),i=n("AytR"),r=n("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.BASE_URL=i.a.server+"/users"}getUsers(){return s(this,void 0,void 0,(function*(){return this.http.get(this.BASE_URL).toPromise()}))}getAlbumsByUser(t){return s(this,void 0,void 0,(function*(){return this.http.get(`${this.BASE_URL}/${t}/albums`).toPromise()}))}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(r.a))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),a=(()=>{class t{constructor(t){this.http=t,this.BASE_URL=i.a.server+"/albums"}getPhotosByAlbum(t){return s(this,void 0,void 0,(function*(){return this.http.get(`${this.BASE_URL}/${t}/photos`).toPromise()}))}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(r.a))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=n("NFeN"),m=n("+0xr");function b(t,e){1&t&&(c.Tb(0,"th",8),c.tc(1," Users "),c.Sb())}function d(t,e){if(1&t&&(c.Tb(0,"td",9),c.tc(1),c.Sb()),2&t){const t=e.$implicit;c.Cb(1),c.vc(" ",t.name," ")}}function h(t,e){1&t&&c.Ob(0,"tr",10)}const f=function(t){return{selected:t}};function p(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr",11),c.bc("click",(function(){c.mc(t);const n=e.$implicit;return c.fc(2).selectRow(n)})),c.Sb()}if(2&t){const t=e.$implicit,n=c.fc(2);c.ic("ngClass",c.jc(1,f,t.id===(null==n.selectedUser?null:n.selectedUser.id)))}}function g(t,e){if(1&t&&(c.Tb(0,"table",2),c.Rb(1,3),c.sc(2,b,2,0,"th",4),c.sc(3,d,2,1,"td",5),c.Qb(),c.sc(4,h,1,0,"tr",6),c.sc(5,p,1,3,"tr",7),c.Sb()),2&t){const t=c.fc();c.ic("dataSource",t.users),c.Cb(4),c.ic("matHeaderRowDef",t.displayedColumns),c.Cb(1),c.ic("matRowDefColumns",t.displayedColumns)}}let C=(()=>{class t{constructor(){this.selectUser=new c.o,this.displayedColumns=["name"]}ngOnInit(){}selectRow(t){this.selectUser.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["cor-user-list"]],inputs:{users:"users",selectedUser:"selectedUser"},outputs:{selectUser:"selectUser"},decls:2,vars:1,consts:[[1,"component-container"],["mat-table","","class","",3,"dataSource",4,"ngIf"],["mat-table","",1,"",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.sc(1,g,6,3,"table",1),c.Sb()),2&t&&(c.Cb(1),c.ic("ngIf",e.users))},directives:[o.j,m.j,m.c,m.e,m.b,m.g,m.i,m.d,m.a,m.f,m.h,o.h],styles:[".component-container[_ngcontent-%COMP%]{display:flex;justify-content:center}table[_ngcontent-%COMP%]{border:1px solid #ddd;width:100%}.selected[_ngcontent-%COMP%]{background-color:#3f51b5}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width:580px){table[_ngcontent-%COMP%]{width:90%}}"],changeDetection:0}),t})();var v=n("Xa2L"),w=n("3Pt+"),P=n("kmnG"),O=n("d3UM"),y=n("FKr1");function _(t,e){if(1&t&&(c.Tb(0,"mat-option",6),c.tc(1),c.Sb()),2&t){const t=e.$implicit;c.ic("value",t.id),c.Cb(1),c.vc(" ",t.title," ")}}let M=(()=>{class t{constructor(){this.selectAlbum=new c.o,this.albumIdCtrl=new w.a}ngOnInit(){this.listenToChanges()}ngOnDestroy(){this.subscription.unsubscribe()}listenToChanges(){this.subscription=this.albumIdCtrl.valueChanges.subscribe(t=>{this.selectAlbum.emit(t)})}resetControl(){this.albumIdCtrl.reset(null,{emitEvent:!1})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["cor-album-picker"]],inputs:{user:"user",albums:"albums"},outputs:{selectAlbum:"selectAlbum"},decls:9,vars:3,consts:[[1,"component-container"],[1,"user-name"],["appearance","outline","color","primary"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"spacer"],[3,"value"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"p",1),c.tc(2),c.Sb(),c.Tb(3,"mat-form-field",2),c.Tb(4,"mat-label"),c.tc(5,"Choose an Album"),c.Sb(),c.Tb(6,"mat-select",3),c.sc(7,_,2,2,"mat-option",4),c.Sb(),c.Sb(),c.Ob(8,"div",5),c.Sb()),2&t&&(c.Cb(2),c.uc(e.user.name),c.Cb(4),c.ic("formControl",e.albumIdCtrl),c.Cb(1),c.ic("ngForOf",e.albums))},directives:[P.b,P.e,O.a,w.e,w.b,o.i,y.f],styles:[".user-name[_ngcontent-%COMP%]{color:#3f51b5;font-weight:500;margin-right:8px 3px}mat-form-field[_ngcontent-%COMP%]{width:100%;max-width:400px}spacer[_ngcontent-%COMP%]{flex:1 1 auto}@media screen and (max-width:580px){.component-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}mat-form-field[_ngcontent-%COMP%]{max-width:90%}}"],changeDetection:0}),t})();function x(t,e){if(1&t&&(c.Tb(0,"div",3),c.Ob(1,"img",4),c.Sb()),2&t){const t=e.$implicit;c.Cb(1),c.ic("src",t.thumbnailUrl,c.nc)}}let U=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["cor-photo-gallery"]],inputs:{photos:"photos"},decls:3,vars:1,consts:[[1,"component-container"],[1,"album-container"],["class","photo-container",4,"ngFor","ngForOf"],[1,"photo-container"],[3,"src"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.sc(2,x,2,1,"div",2),c.Sb(),c.Sb()),2&t&&(c.Cb(2),c.ic("ngForOf",e.photos))},directives:[o.i],styles:[".photo-container[_ngcontent-%COMP%]{display:inline-flex;margin:5px}@media screen and (max-width:580px){.component-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.album-container[_ngcontent-%COMP%]{max-width:90%}}"],changeDetection:0}),t})();const S=["picker"];function A(t,e){1&t&&(c.Tb(0,"div",9),c.Ob(1,"mat-spinner"),c.Sb())}function k(t,e){if(1&t){const t=c.Ub();c.Tb(0,"cor-album-picker",10,11),c.bc("selectAlbum",(function(e){return c.mc(t),c.fc().selectAlbum(e)})),c.Sb()}if(2&t){const t=c.fc();c.ic("user",t.selectedUser)("albums",t.albums)}}function T(t,e){if(1&t&&c.Ob(0,"cor-photo-gallery",12),2&t){const t=c.fc();c.ic("photos",t.photos)}}let I=(()=>{class t{constructor(t,e){this.userData=t,this.albumData=e,this.loading=!0}ngOnInit(){this.loadUsers()}selectUser(t){t&&(this.photos&&this.resetPhotos(),this.selectedUser=t,this.loadUserAlbums(t.id))}selectAlbum(t){t&&(this.selectedAlbum=this.albums.find(e=>e.id===t),this.loadPhotos(t))}back(){this.photos?this.resetPhotos():this.selectedUser&&this.resetAlbums()}resetPhotos(){this.photos=null,this.selectedAlbum=null,this.albumPickerComponent.resetControl()}resetAlbums(){this.albums=null,this.selectedUser=null}loadUsers(){return s(this,void 0,void 0,(function*(){try{this.users=yield this.userData.getUsers()}catch(t){console.log(t)}finally{this.loading=!1}}))}loadPhotos(t){return s(this,void 0,void 0,(function*(){this.loading=!0;try{this.photos=yield this.albumData.getPhotosByAlbum(t)}catch(e){console.log(e)}finally{this.loading=!1}}))}loadUserAlbums(t){return s(this,void 0,void 0,(function*(){this.loading=!0;try{this.albums=yield this.userData.getAlbumsByUser(t)}catch(e){console.log(e)}finally{this.loading=!1}}))}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(l),c.Nb(a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-photos"]],viewQuery:function(t,e){var n;1&t&&c.wc(S,!0),2&t&&c.kc(n=c.cc())&&(e.albumPickerComponent=n.first)},decls:10,vars:5,consts:[["class","spinner-container",4,"ngIf"],[1,"actions"],[3,"click"],[1,"column-container"],[1,"left"],[3,"users","selectedUser","selectUser"],[1,"right"],[3,"user","albums","selectAlbum",4,"ngIf"],[3,"photos",4,"ngIf"],[1,"spinner-container"],[3,"user","albums","selectAlbum"],["picker",""],[3,"photos"]],template:function(t,e){1&t&&(c.sc(0,A,2,0,"div",0),c.Tb(1,"section",1),c.Tb(2,"mat-icon",2),c.bc("click",(function(){return e.back()})),c.tc(3,"arrow_back"),c.Sb(),c.Sb(),c.Tb(4,"div",3),c.Tb(5,"section",4),c.Tb(6,"cor-user-list",5),c.bc("selectUser",(function(t){return e.selectUser(t)})),c.Sb(),c.Sb(),c.Tb(7,"section",6),c.sc(8,k,2,2,"cor-album-picker",7),c.sc(9,T,1,1,"cor-photo-gallery",8),c.Sb(),c.Sb()),2&t&&(c.ic("ngIf",e.loading),c.Cb(6),c.ic("users",e.users)("selectedUser",e.selectedUser),c.Cb(2),c.ic("ngIf",e.albums),c.Cb(1),c.ic("ngIf",e.photos))},directives:[o.j,u.a,C,v.b,M,U],styles:[".actions[_ngcontent-%COMP%]{padding:20px;background-color:#f8f8f8;display:flex;align-items:center}.actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.column-container[_ngcontent-%COMP%]{display:flex}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding:10px}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:20%;min-width:300px}.column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:80%}.spinner-container[_ngcontent-%COMP%]{height:calc(100vh - 60px);width:100%;position:absolute;display:flex;justify-content:center;align-items:center}mat-spinner[_ngcontent-%COMP%]{height:100%;display:absolute}@media screen and (max-width:1000px){.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{min-width:200px}}@media screen and (max-width:580px){.column-container[_ngcontent-%COMP%]{flex-direction:column}.column-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .column-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}"]}),t})();var D=n("tyNb"),R=n("i2L+");const B=[{path:"",component:I}];let L=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[o.b,R.a,D.b.forChild(B)]]}),t})()}}]);